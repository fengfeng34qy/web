
<!DOCTYPE html>
<html lang="zh-cn">
<head>
<meta charset="utf-8">
<title>QQ音乐MV进阶体验</title>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" />
<link rel="stylesheet" href="css/animate.css">
<link rel="stylesheet" href="css/index.css?max_age=2592000" />
<script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<style type="text/css">
.mod_loading .content .progress span{-webkit-transition:width 0.4s linear;}
</style>
</head>
<body class="bodybox">

<div class="wrap" id="wrap">
    
    <div class="item item-1">
        <div class="box">
            <!-- <div class="invite">
                <div class="open_bg_before"></div>
                <div class="open_bg_after"></div>
                <div class="open_content"></div>
                <div class="logo"></div>
                <div class="test"></div>
            </div> -->
            <div class="invite2" style="text-align:center;">
                <span class="item1_text">献</span>
                <span class="item1_text">给</span>
                <span class="item1_text">我</span>
                <span class="item1_text">最</span>
                <span class="item1_text">爱</span>
                <span class="item1_text">的</span>
                <span class="item1_text">人</span>
            </div>
            <div class="item1_img" style="width:162px;height:162px;position:absolute;top: 300px;left:30px;">
                <img src="css/img/item1-nv.jpg" style="width:100%;height:100%;">
            </div>
            <div class="item1_xin" style="width:137px;height:137px;position:absolute;top:360px;left:200px;">
                静娴
            </div>
        </div>
    </div>

    <div class="item item-2">
        <div class="box" >
            <div class="item2_victory">
                <img style="width:100%;height:100%;" src="css/img/victory.jpg" alt="">
            </div>
            <div class="item2_text" style="width:80%;margin: 0 auto;font-size:30px;">你是一个活泼可爱的女孩,很善良,很天真</div>
        </div>
    </div>

    <div class="item item-3">
        <div class="box" style="width:80%;margin:100px auto;color:rgb(255, 0, 128);font-size:30px;">
            <div class="item3_text">虽然我们接触的时间不长,只有短短的几个月,却让我感觉是那么的熟悉与开心</div>
            <div style="overflow:hidden;margin-left: 40px;">
                <div class="item3_man" style="width:120px;height:157px;float:left;">
                    <img style="width:100%;height:100%;" src="css/img/7e3e6709c93d70cf7513f5c8ffdcd100bba12b0d.jpg">
                </div>
                <div class="item3_nv" style="width:131px;height:170px;float:left;">
                    <img style="width:100%;height:100%;" src="css/img/b7003af33a87e950d88aaca917385343faf2b452.jpg">
                </div>
            </div>
        </div>
    </div>

    <div class="item item-4">
        <div class="box">
            <div class="item4_text">
                难以忘记初次见你的感觉,我被一种神奇的东西吸引
            </div>
            <div class="item4_img">
                <img style="width:100%;height:100%" src="css/img/4034970a304e251fd115bd3da086c9177e3e5310.jpg">
            </div>
        </div>
    </div>

    <div class="item item-5">
        <div class="box">
            <div class="item5_img">
                <img style="width:100%;height:100%;" src="css/img/9213b07eca806538f832fcd690dda144ac34821f.jpg">
            </div>
            <div class="item5_text">
                那时我的心七上八下的,我想想这就是一见钟情
            </div>
        </div>
    </div>

    <div class="item item-6">
        <div class="box">
            <div class="item6_text">
                从那以后,你的一个微笑,一个表情,都深深地留在了我的心里
            </div>
            <div class="item6_img">
                <img style="width:100%;height:100%;" src="css/img/80cb39dbb6fd5266b66966d1ac18972bd50736b0.jpg">
            </div>
        </div>
    </div>

    <div class="item item-7">
        <div class="star star1" style="width:70px;height:70px;left:200px;top: 40px;"></div>
        <div class="star star2" style="width:50px;height:50px;left:60px;top: 100px;"></div>
        <div class="star star3" style="width:40px;height:40px;left:180px;top: 130px;"></div>
        <div class="star star4" style="width:60px;height:60px;left:270px;top: 100px;"></div>
        <div class="box">
            <div class="item7_text item7_text1" style="margin-top: 100px;">
                只要你愿意
            </div>
            <div class="item7_img" style="margin-top: 60px;">
                <img style="width:100%;height:100%;" src="css/img/94cad1c8a786c9173cce16fcce3d70cf3ac75721.jpg" alt="">
            </div>
            <div class="item7_text item7_text2" style="margin-top: 60px;">
                我可以陪你去吃
            </div>
            <div class="item7_text item7_text2">
                你喜欢吃的东西
            </div>
        </div>
    </div>

    <div class="item item-8">
        <div class="star star1" style="width:70px;height:70px;left:200px;top: 40px;"></div>
        <div class="star star2" style="width:50px;height:50px;left:60px;top: 100px;"></div>
        <div class="star star3" style="width:40px;height:40px;left:180px;top: 130px;"></div>
        <div class="star star4" style="width:60px;height:60px;left:270px;top: 100px;"></div>
        <div class="box">
            <div class="item8_text item8_text1" style="margin-top: 100px;">
                只要你愿意
            </div>
            <div class="item8_img" style="margin-top: 60px;">
                <img style="width:100%;height:100%;" src="css/img/c995d143ad4bd1130749f0f75dafa40f4afb056a.jpg" alt="">
            </div>
            <div class="item8_text item8_text2" style="margin-top: 60px;">
                我可以陪你去
            </div>
            <div class="item8_text item8_text2">
                任何你想去的地方
            </div>
        </div>
    </div>

    <div class="item item-9">
        <div class="box">
            <div class="item9_text" style="margin-top: 60px;">
                总之，只要你愿意
            </div>
            <div class="item9_text">
                我会一直陪着你
            </div>
            <div class="item9_img" style="margin-top: 80px;">
                <img style="width:100%;height:100%;" src="css/img/d788d43f8794a4c22e29a5ee09f41bd5ac6e39e8.jpg">
            </div>
        </div>
    </div>

    <div class="item item-10">
        <div class="tyimg"></div>
        <div class="star star1" style="width:70px;height:70px;left:200px;top: 300px;"></div>
        <div class="star star2" style="width:50px;height:50px;left:45px;top: 394px;"></div>
        <div class="star star3" style="width:40px;height:40px;left:180px;top: 444px;"></div>
        <div class="star star4" style="width:60px;height:60px;left:308px;top: 400px;"></div>
        <div class="box">
            <div class="item10_img" style="margin-top: 120px;">
                <img style="width:100%;height:100%;" src="css/img/08f790529822720e46a1393f7ccb0a46f31fab8c.jpg">
            </div>
            <div class="item10_text" style="margin-top:60px;">
                静娴，做我女朋友吧!
            </div>
            <div class="item10_text">
                &nbsp;&nbsp;&nbsp;&nbsp;- - 爱你的小猪猪
            </div>
            <div class="btnWrap">
                <div id="ty" class="ty">同意</div>
                <div id="jj" class="jj">拒绝</div>
            </div>
        </div>

        </div>
        
    </div>

</div>

<!-- 加载提示 _S -->
<div class="mod_loading" id="loading">
    <div class="content">
        <div class="progress"><span id="progress_bg" style="width:0;"></span></div>
        <p>Loading...</p>
    </div>
</div>
<!-- 加载提示 _E -->

<!-- 播放状态 _S -->
<div class="icon_sound off js-btn-bgsong"><i></i></div>
<!-- 播放状态 _E -->

<!-- 滑块 _S -->
<div class="global">
    <div class="slider"><span></span></div>
</div>
<!-- 滑块 _E -->
<script type="text/javascript">
window.debug=true;
</script>

<!-- <script type="text/javascript" src="http://imgcache.gtimg.cn/music/h5/lib/js/zepto-1.0.min.js?_bid=299&max_age=2592000"></script> -->
<script type="text/javascript" src="http://imgcache.gtimg.cn/music/h5/lib/js/music-1.0.min.js?_bid=299&max_age=2592000"></script>

<script type="text/javascript" src="iSlider.js"></script>

<script>

var myslider=new iSlider({
    index:0,
    loadingImgs:[
        'http://imgcache.gtimg.cn/mediastyle/mobile/event/20150129_double_language_mv/img/open_content.png?d=20150203165217',
        'http://imgcache.gtimg.cn/mediastyle/mobile/event/20150129_double_language_mv/img/invite_bg.png?d=20150203165217',
        'http://imgcache.gtimg.cn/mediastyle/mobile/event/20150129_double_language_mv/img/open_bg_after.png?d=20150203165217'
    ],
    onloading:function (complete,total) {
        this.$('#progress_bg').style.width=complete/total*100+'%';
        if (complete==total) {
            this.$('#loading').style.display="none"
        }
    },
    onslide: function(index){
        if(index === 0){
            $('.invite2').one('webkitTransitionEnd', function(){
                $('.item1_text').delay(120000).addClass('animated ' + 'rubberBand').one('webkitAnimationEnd', function(){
                    $(this).removeClass('animated ' + 'rubberBand')
                })
            });
            $('.item1_img').one('webkitTransitionEnd', function(){
                $(this).addClass('animated bounce infinite')
            })
            $('.item1_xin').one('webkitTransitionEnd', function(){
                $(this).addClass('animated pulse infinite')
            })
        }else if(index === 1){
            $('.item2_victory').one('webkitTransitionEnd', function(){
                $(this).addClass('animated pulse').one('webkitAnimationEnd', function(){
                    $(this).removeClass('animated pulse')
                })
            })
            $('.item2_text').one('webkitAnimationEnd', function(){
                $(this).addClass('animated pulse infinite')
            })
        }else if(index === 2){
            // $('.item3_text').addClass('animated bounceInDown')
            $('.item3_nv').hide();
            $('.item3_man').hide();
            $('.item3_text').one('webkitAnimationEnd', function(){
                $('.item3_nv').show();
                $('.item3_nv').addClass('animated bounceInRight').one('webkitAnimationEnd', function(){
                    $('.item3_man').show();
                    $('.item3_man').addClass('animated bounceInLeft')
                    
                })
            })
        }else if(index === 3){
            $('.item4_img').hide();
            $('.item4_text').one('webkitAnimationEnd', function(){
                $('.item4_img').show();
                $('.item4_img').addClass('animated bounceIn')
            })
        }else if(index === 4){
            $('.item5_text').hide();
            $('.item5_img').one('webkitAnimationEnd', function(){
                $('.item5_text').show();
                $('.item5_text').addClass('animated zoomIn')
            })
        }else if(index === 5){
            $('.item6_img').hide();
            $('.item6_text').one('webkitAnimationEnd', function(){
                $('.item6_img').show();
                $('.item6_img').addClass('animated flipInY')
            })
        }else if(index === 6){
            $('.item7_text2').hide();
            $('.item7_text1').one('webkitAnimationEnd', function(){
                $('.item7_text2').show();
                $('.item7_text2').addClass('animated flipInX')
            })
        }else if(index === 7){
            $('.item8_text2').hide();
            $('.item8_text1').one('webkitAnimationEnd', function(){
                $('.item8_text2').show();
                $('.item8_text2').addClass('animated flipInX')
            })
        }else if(index === 9){
            $('.item10_text').hide();
            $('.item10_img').one('webkitAnimationEnd', function(){
                $('.item10_text').show();
                $('.item10_text').addClass('animated bounceInUp').one('webkitAnimationEnd', function(){
                    // $('..item-10 .star').addClass('animated tada infinite')
                })
            })
        }
    }
});

$('#jj').on('click', function(){
    console.log('sd');
})





//背景音乐模块
// var bgsongid='464695';

// if ($.browser.music) {

//     M.musicReady(function () {

//         $('.js-btn-bgsong').on('touchstart',function () {
//             if ($(this).hasClass('off')) {
//                 M.bridge.callHandler("music_resume",{}, function(res){ });
//             }else {
//                 M.bridge.callHandler("music_pause",{}, function(res){ });
//             }
//         })

//         M.bridge.callHandler("query_songinfo",{}, function(res){

//             M.bridge.callHandler('23', {
//                 'k1'		: 0,
//                 'k2'		: bgsongid,
//                 'action'	: 'backplay',
//                 'actionp'	: {}
//             }, function(data){

//             })

//             if (res.code==0 && res.data) {
//                 if (res.data.state=='pause') {
//                     $('.js-btn-bgsong').addClass('off')
//                 }else {
//                     $('.js-btn-bgsong').removeClass('off')
//                 }
//             }
//             $('.js-btn-bgsong').show();
//         });


//         M.bridge.onAPP("register_musicstate", function(res){
//             if (res.code==0 && res.data) {
//                 if (res.data.state=='pause') {
//                     $('.js-btn-bgsong').addClass('off')
//                 }else {
//                     $('.js-btn-bgsong').removeClass('off')
//                 }
//             }
//         });
//     })
// }else {
    
//     if (!M.audio) {
//         M.audio = document.createElement('audio');
//         document.body.appendChild(M.audio);
//     }

//     M.audio.src='http://ws.stream.qqmusic.qq.com/'+bgsongid+'.m4a?fromtag=30';


//     $(M.audio).on('pause',function () {
//         $('.js-btn-bgsong').addClass('off')
//     }).on('playing',function () {
//         $('.js-btn-bgsong').removeClass('off');
//     }).on('canplay',function () { //android2.3 不能直接播放  只能在canplay的时候 调用play()
//         M.audio.play();
//     });

//     $('.js-btn-bgsong').on('touchstart', function (e) {
//         e.preventDefault();
//         if (/off/.test(this.className)) {
//             M.audio.play();
//             $('.js-btn-bgsong').addClass('off')
//         }else {
//             M.audio.pause();
//             $('.js-btn-bgsong').removeClass('off');
//         }
//         return false;
//     });

//     $(document).on('touchstart',function () {
//         M.audio.play();
//     })

// }

function base64Encode(input) {
    var keyStr = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
    var output = "";
    var chr1, chr2, chr3, enc1, enc2, enc3, enc4;
    var i = 0;

    var string = input.replace(/\r\n/g, "\n");

    input = "";
    for (var n = 0; n < string.length; n++) {
        var c = string.charCodeAt(n);
        if (c < 128) {
            input += String.fromCharCode(c);
        } else if (c > 127 && c < 2048) {
            input += String.fromCharCode(c >> 6 | 192);
            input += String.fromCharCode(c & 63 | 128);
        } else {
            input += String.fromCharCode(c >> 12 | 224);
            input += String.fromCharCode(c >> 6 & 63 | 128);
            input += String.fromCharCode(c & 63 | 128);
        }
    }

    while (i < input.length) {
        chr1 = input.charCodeAt(i++);
        chr2 = input.charCodeAt(i++);
        chr3 = input.charCodeAt(i++);
        enc1 = chr1 >> 2;
        enc2 = (chr1 & 3) << 4 | chr2 >> 4;
        enc3 = (chr2 & 15) << 2 | chr3 >> 6;
        enc4 = chr3 & 63;
        if (isNaN(chr2)) {
            enc3 = enc4 = 64;
        } else if (isNaN(chr3)) {
            enc4 = 64;
        }
        output = output + keyStr.charAt(enc1) + keyStr.charAt(enc2) + keyStr.charAt(enc3) + keyStr.charAt(enc4);
    }
    return output;
}


// $('.wrap').on('tap','.js-play-mv',function () {
//     var vid=this.getAttribute ('data-vid');
//     if (!vid) {
//         return ;
//     }
//     if ($.browser.music) {
//         M.bridgeCall('19',{
//             k2:vid,
//             k3:base64Encode(this.getAttribute ('data-mvname')),
//             k7:base64Encode(this.getAttribute ('data-mvsinger'))
//         },function () {
//         })
//     }else {
//         location.href='http://y.qq.com/w/mv.html?vid=' + vid;
//     }
// }).on('tap','.js-open-music',function () {
//     if ($.browser.music) {
//         M.bridgeCall('16',{
//             k1:1,
//             k3:base64Encode('MV精选'),
//             k4:2009
//         },function () {
//         })
//     }else {
//         M.openMusic();
//     }
// }).on('tap','.btn_share',function () {
//     M.share.call();
// })


// M.share.init({
//     title:'【QQ音乐双语MV】',
//     desc:'“译”动你我，极致体验',
//     link:M.delParam('mmkey',M.delParam('sid',location.href)),
//     img:'http://i.gtimg.cn/music/common/upload/msa/201523/28d24ec09ebb9d93cf331d8eaec217be.jpg'
// })


$('#go1').click(function () {
    myslider.slideTo(0)
})
</script>
</body>
</html>